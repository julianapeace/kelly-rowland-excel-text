<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kelly Rowland Excel Text ğŸ“Š</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="landing-container">
        <div class="header">
            <h1>ğŸ“Š Excel Text Messenger</h1>
            <p class="subtitle">Text through Excel like Kelly Rowland â€¢ End-to-End Encrypted</p>
        </div>

        <div class="form-container">
            <div class="tab-buttons">
                <button class="tab-btn active" data-tab="create">Create Room</button>
                <button class="tab-btn" data-tab="join">Join Room</button>
            </div>

            <div class="tab-content active" id="create-tab">
                <h2>Create a New Room</h2>
                <form id="create-form">
                    <div class="form-group">
                        <label>Your Name</label>
                        <input type="text" id="create-username" placeholder="Enter your name" required>
                    </div>
                    <div class="form-group">
                        <label>Room Passphrase ğŸ”’</label>
                        <input type="password" id="create-passphrase" placeholder="Create a secure passphrase" required>
                        <small>This will be used for end-to-end encryption. Share it with people you want to chat with!</small>
                    </div>
                    <button type="submit" class="btn btn-primary">Create Room</button>
                </form>
            </div>

            <div class="tab-content" id="join-tab">
                <h2>Join an Existing Room</h2>
                <form id="join-form">
                    <div class="form-group">
                        <label>Your Name</label>
                        <input type="text" id="join-username" placeholder="Enter your name" required>
                    </div>
                    <div class="form-group">
                        <label>Room ID</label>
                        <input type="text" id="join-room-id" placeholder="Enter room ID" required>
                    </div>
                    <div class="form-group">
                        <label>Room Passphrase ğŸ”’</label>
                        <input type="password" id="join-passphrase" placeholder="Enter room passphrase" required>
                        <small>Get this from the person who created the room</small>
                    </div>
                    <button type="submit" class="btn btn-primary">Join Room</button>
                </form>
            </div>
        </div>

        <div class="info-section">
            <h3>How it works:</h3>
            <ul>
                <li>ğŸ” All messages are encrypted end-to-end using AES-GCM</li>
                <li>ğŸ”‘ Your passphrase never leaves your browser</li>
                <li>ğŸ“Š Messages appear in an Excel-like interface (because why not?)</li>
                <li>ğŸš€ Real-time messaging via WebSockets</li>
            </ul>
        </div>
    </div>

    <script src="crypto.js"></script>
    <script>
        // Tab switching
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const tab = btn.dataset.tab;
                
                // Update active states
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                btn.classList.add('active');
                document.getElementById(`${tab}-tab`).classList.add('active');
            });
        });

        // Create room form
        document.getElementById('create-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const username = document.getElementById('create-username').value.trim();
            const passphrase = document.getElementById('create-passphrase').value;
            
            // Generate random room ID
            const roomId = generateRoomId();
            
            // Store session data
            sessionStorage.setItem('username', username);
            sessionStorage.setItem('roomId', roomId);
            sessionStorage.setItem('passphrase', passphrase);
            
            // Redirect to chat
            window.location.href = `chat.html`;
        });

        // Join room form
        document.getElementById('join-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const username = document.getElementById('join-username').value.trim();
            const roomId = document.getElementById('join-room-id').value.trim();
            const passphrase = document.getElementById('join-passphrase').value;
            
            // Store session data
            sessionStorage.setItem('username', username);
            sessionStorage.setItem('roomId', roomId);
            sessionStorage.setItem('passphrase', passphrase);
            
            // Redirect to chat
            window.location.href = `chat.html`;
        });

        function generateRoomId() {
            return Math.random().toString(36).substring(2, 10).toUpperCase();
        }
    </script>
</body>
</html>
